site:
  basename: https://honestandroid.games

rules:

  - selectorType: layout
    template: "{{ frontMatter.layout }}"
    outputPattern: "{{ metadata.parent }}/{{ metadata.name }}.html"
    context:
      page: $
      content: $.content
      timestamp: $.frontMatter.timestamp

  - selectorType: type
    selector: txt
    outputPattern: "{{ metadata.parent }}/{{ metadata.name }}.txt"

  - selectorType: jsonpath
    selector: $.content.games.content[*]
    template: game
    outputPattern: "games/{{ metadata.name }}/index.html"
    context:
      page: $.content.main
      content: $.content.main.content
      timestamp: $.content.main.frontMatter.timestamp
      gameId: $.metadata.name

assets:
  - dir: static
    to: assets
  - dir: content
    glob: "**/*.png"
  - dir: content
    glob: "**/*.webp"
  - dir: content
    glob: "**/*.jpg"
  - dir: html
    glob: "**/*.html"

processors:
  sitemap:
    publishedPath: $.context.page.frontMatter.timestamp.published
    updatedPath: $.context.page.frontMatter.timestamp.updated
  rss:
    site:
      title: "{{ compact.site.title }}"
      language: "{{ compact.site.language }}"
      description: "{{ compact.site.description }}"
      updatePeriod: hourly
      updateFrequency: 1
    pages:
      - having:
          path: $.output.template
          value: game
        published: $.context.timestamp.published
        updated: $.context.timestamp.updated

